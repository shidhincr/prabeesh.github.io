
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>This is One of the Solutions</title>
  <meta name="author" content="Prabeesh K">

  
  <meta name="description" content="This post focuses on parallel computing on the GPU. Parallel computing is a way of solving large problems by breaking them into smaller pieces and &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="msvalidate.01" content="E9C54D49527AFA588120A46982BDE002" />

  
  <link rel="canonical" href="http://blog.prabeeshk.com/posts/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="This is One of the Solutions" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-56250765-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">This is One of the Solutions</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.prabeeshk.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/22/introduction-to-parallel-programing/">Introduction to Parallel Programing</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-02-22T23:16:54+05:30'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2013</span></span> <span class='time'>11:16 pm</span></time>
        
           | <a href="/blog/2013/02/22/introduction-to-parallel-programing/#disqus_thread"
             data-disqus-identifier="http://blog.prabeeshk.com/blog/2013/02/22/introduction-to-parallel-programing/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This post focuses on parallel computing on the GPU. Parallel computing is a way of solving large problems by breaking them into smaller pieces and run these smaller pieces at the same time.</p>

<h3>Main reasons of technical trends on the parallel computing on the GPU</h3>

<p>Modern processors are made from transistors. And each year, those transistors get smaller and smaller. The feature size is the minimum size of a transistor on a chip. As the feature size decreases, transistors get smaller, run faster, use less power, and put more of them on a chip. And the consequence is that ,more and more resources for computation every single year. One of the primary feature of a processors is clock speed . Over many years, the clock speeds continue to go up. However, over the last decade, that have essentially remained constant. Even though transistors are continuing to get smaller and faster and consume less energy per transistor, Running a billion transistors generates high amount of heat . since we can&rsquo;t keep all these processors cool, Power has emerged as a primary driving factor.</p>

<p>Traditional CPUs has very complicated control hardware. This allows flexibility in performance, but as control hardware gets more complicated, it becomes more expensive in terms of power and design complexity. So might choose to build simpler control structures. And the way is that going to build that data path in the GPU is by building a large number of parallel compute units. Individually, those compute units are small, simple and power efficient. So put a very large number of them on a single chip. More generally program them in such a way that they can all work together to solve complex problems. A high end GPU contains over 3,000 arithmetic units, ALUs, that can simultaneously run 3,000 arithmetic operations. Gpus can have tens of thousands of parallel pieces which are active at the same time. each of those pieces of work a thread, and a modern GPU may be running up to 65,000 concurrent threads. Together, all this computing power has the potential to solve the problems faster.</p>

<p>To build a power efficient processor, choice is minimizing latency. Latency is the amount of time to complete a task. The other choice is throughput. Throughput is tasks completed per unit time. Regulating throughput is the right approach,because Latency Lags Bandwidth</p>

<h3>CUDA(Computer Unified Device Architecture)</h3>

<p>CUDA is a parallel programming platform. The programming model implemented by the GPU is created by NVIDIA. CUDA gives developers to access the virtual instruction set memory of the parallel computational elements in CUDA GPUs. Unlike CPUs, GPU have a parallel throughput architecture that emphasizes executing many concurrent threads slowly, rather than executing a single thread very quickly. This approach for solving general purpose problems on GPU is known as GPGPU.</p>

<p>The CUDA programming model allows us to program both CPU and GPU with one program so that the power of the GPU in programs. At First, the CPU allocates storage space on the GPU. Then, the CPU copies some input data from the CPU to the GPU.and the Next step is, CPU calls some kernels watching these kernels on the GPU that process this data. And finally, the CPU copies the results back to the CPU from the GPU.</p>

<p>This blog is my short notes as part of the course now I am doing in the Udacity <a href="https://www.udacity.com/course/cs344">Intro to Parallel Programming</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/09/developing-a-simple-game-with-html5-slash-canvas/">Developing a Simple Game With HTML5/canvas</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-02-09T10:12:43+05:30'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>10:12 am</span></time>
        
           | <a href="/blog/2013/02/09/developing-a-simple-game-with-html5-slash-canvas/#disqus_thread"
             data-disqus-identifier="http://blog.prabeeshk.com/blog/2013/02/09/developing-a-simple-game-with-html5-slash-canvas/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>HTML5 is the new HTML standard. One of the most interesting new feature in HTML5 is the canvas element <strong>canvas</strong> for 2D drawing. A canvas is a rectangular area on an HTML page. All drawing on the canvas must be done using JavaScript. This post go through the basics of implementing a 2D canvas context, and using the basic canvas functions for developing a simple game.
Creating a canvad context, adding the <strong>canvas</strong> element to your HTML document like so</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;canvas</span> <span class="na">id=</span><span class="s">&quot;Canvas&quot;</span> <span class="na">width=</span><span class="s">&quot;800&quot;</span> <span class="na">height=</span><span class="s">&quot;450&quot;</span><span class="nt">&gt;&lt;/canvas&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>
To draw inside the canvas need to use Javascript. First find the canvas element using  getElementById, then initialize the context.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nx">documnet</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;Canvas&quot;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="err">/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>To draw text on a canvas, the most import property and methods are:
    font - deifine the font properties for text
    fillTex(text, x, y) - Draw filled text on the canvas
To set the font, size, and style of HTML5 canvas text, setg the font property of the canvas context to a string containing the font style, size and family separeted by spaces.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
</span><span class='line'><span class="nx">context</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="s2">&quot; 20px sans-serif&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nx">context</span><span class="p">.</span><span class="nx">textAlign</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nx">context</span><span class="p">.</span><span class="nx">fillStyle</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nx">context</span><span class="p">.</span><span class="nx">textBaseline</span> <span class="o">=</span> <span class="s2">&quot;top&quot;</span>
</span><span class='line'><span class="nx">context</span><span class="p">.</span><span class="nx">fillText</span><span class="p">(</span><span class="s2">&quot;Press Enter Key to start the game&quot;</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>
To draw an image on a canvas use the following method
drawImage(image, X, Y, Width, Height)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">bird</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">();</span>
</span><span class='line'><span class="nx">bird</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s1">&#39;bird.png&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nx">context</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">bird</span><span class="p">,</span> <span class="nx">posX</span><span class="p">,</span> <span class="nx">posY</span><span class="p">,</span> <span class="nx">Width</span><span class="p">,</span> <span class="nx">Height</span><span class="p">);</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>To rotate the HTML5 Canvas, use the rotate() transform method. The rotate transformation requires an angle in radians.
  context.rotate(angle);</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
</span><span class='line'><span class="nx">context</span><span class="p">.</span><span class="nx">rotate</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mi">60</span><span class="p">);</span>
</span><span class='line'><span class="nx">context</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">gun</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>
</span><span class='line'><span class="o">&lt;</span><span class="err">/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>To get the event occurring in the document, use  EventListener.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>The functions used for  game development are
The WhichKey() is used for the read the keyboard input. The UP/DOWN arrow keys are used for controlling gun movements. The Enter key is used for start the game. The space key is used for firing.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">WhichKey</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>  <span class="p">{</span>
</span><span class='line'>   <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span><span class="o">==</span><span class="mi">38</span><span class="p">)</span> <span class="c1">//UP arrow</span>
</span><span class='line'>     <span class="nx">gunUpMove</span><span class="p">();</span>
</span><span class='line'>   <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span><span class="o">==</span><span class="mi">40</span><span class="p">)</span> <span class="c1">//Down arrow</span>
</span><span class='line'>     <span class="nx">gunDownMove</span><span class="p">();</span>
</span><span class='line'>   <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span><span class="o">==</span><span class="mi">32</span><span class="p">)</span> <span class="c1">// Space Key</span>
</span><span class='line'>     <span class="nx">firing</span><span class="p">();</span>
</span><span class='line'>   <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span><span class="o">==</span><span class="mi">13</span><span class="p">)</span> <span class="c1">//Enter Key</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The counter() is used for setup down counter. Using setInterval(fuction, timeinms) the counter() called by after 1000(1 second).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">60</span><span class="p">;</span>
</span><span class='line'><span class="nx">clear</span><span class="o">=</span><span class="nx">setInterval</span><span class="p">(</span><span class="nx">counter</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
</span><span class='line'><span class="kd">function</span> <span class="nx">counter</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">count</span><span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>   <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">clear</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//code for show the counter</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The birdAppearing() is used for appearing bird on the canvas at random points and disappear after a particular  interval.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">birdAppearing</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">start</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">posx</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">635</span><span class="p">)</span><span class="o">+</span><span class="mi">85</span><span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">posy</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">305</span><span class="p">)</span><span class="o">+</span><span class="mi">85</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">context2</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">bird</span><span class="p">,</span> <span class="nx">posx</span><span class="p">,</span> <span class="nx">posy</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">posX</span> <span class="o">=</span> <span class="nx">posx</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">posY</span> <span class="o">=</span> <span class="nx">posy</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="nx">context2</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">800</span><span class="p">,</span> <span class="mi">450</span><span class="p">);</span>
</span><span class='line'>                 <span class="nx">birdAppearing</span><span class="p">();</span>
</span><span class='line'>               <span class="p">},</span><span class="mi">2000</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The firing() is used for creating red dotted lines in canvas. If the dotted line coordinates exceed the canvas coordinates then it restore to initial position. The end point coordinate of dotted line always compare with the coordinates of center point of the bird image. If  difference between these points less than   radius of the circle centered at bird image then dotted lines restore initial position and also bird will die  and get a point.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">firing</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">context</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="s2">&quot;red&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">context</span><span class="p">.</span><span class="nx">lineWidth</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
</span><span class='line'>    <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">fireStart</span><span class="o">+=</span> <span class="mi">8</span><span class="p">,</span><span class="mi">14</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">fireEnd</span><span class="o">+=</span> <span class="mi">8</span><span class="p">,</span><span class="mi">14</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">context</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">((</span><span class="nx">fireEnd</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">angle</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mi">60</span><span class="p">))</span> <span class="o">&gt;</span><span class="mi">800</span> <span class="o">||</span> <span class="p">(</span><span class="nx">fireEnd</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">angle</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mi">60</span><span class="p">))</span> <span class="o">&gt;</span><span class="mi">450</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>     <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>     <span class="nx">context</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">85</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">fireEnd</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
</span><span class='line'>     <span class="nx">fireStart</span> <span class="o">=</span> <span class="mi">85</span><span class="p">;</span>
</span><span class='line'>     <span class="nx">fireEnd</span> <span class="o">=</span> <span class="mi">87</span><span class="p">;</span>
</span><span class='line'>               <span class="p">},</span><span class="mi">16</span><span class="p">);</span>
</span><span class='line'>     <span class="k">return</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">posX</span><span class="o">+</span><span class="mi">20</span><span class="o">-</span><span class="p">(</span><span class="nx">fireStart</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">angle</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mi">60</span><span class="p">)))</span> <span class="o">&lt;</span> <span class="mi">20</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span> <span class="nx">posY</span><span class="o">+</span><span class="mi">20</span><span class="o">-</span><span class="p">(</span><span class="nx">fireEnd</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">angle</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="o">/</span><span class="mi">60</span><span class="p">)))</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">context</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">85</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">fireEnd</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">fireStart</span> <span class="o">=</span> <span class="mi">85</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">fireEnd</span> <span class="o">=</span> <span class="mi">87</span><span class="p">;</span>
</span><span class='line'>               <span class="p">},</span><span class="mi">16</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">context2</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">800</span><span class="p">,</span> <span class="mi">450</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">context2</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">deadBird</span><span class="p">,</span> <span class="nx">posX</span><span class="p">,</span> <span class="nx">posY</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">score</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">context0</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="s2">&quot; 20px sans-serif&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">context0</span><span class="p">.</span><span class="nx">textAlign</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">context0</span><span class="p">.</span><span class="nx">fillStyle</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">context0</span><span class="p">.</span><span class="nx">textBaseline</span> <span class="o">=</span> <span class="s2">&quot;top&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">context0</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">800</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">context0</span><span class="p">.</span><span class="nx">fillText</span><span class="p">(</span><span class="s1">&#39;Score :&#39;</span><span class="o">+</span> <span class="nx">score</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The source code is available <a href="https://github.com/prabeesh/Game-Javascript-Canvas-GAE">here</a>.</p>

<p>To play game <a href="http://prabs-game.appspot.com/">click here</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/14/finding-rc-constant-using-atmega8/">Finding RC Constant Using ATmega8</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-07-14T23:39:00+05:30'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>11:39 pm</span></time>
        
           | <a href="/blog/2012/07/14/finding-rc-constant-using-atmega8/#disqus_thread"
             data-disqus-identifier="http://blog.prabeeshk.com/blog/2012/07/14/finding-rc-constant-using-atmega8/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The time constant(sec) of a RC circuit is equal to the product of the resistance and the capacitance of the circuit.</p>

<p>It is the time required to charge the capacitor through the resistor to 63. 2% of full charge,or to discharge it to 36.8% of its initial voltage.</p>

<p>The voltage of the RC circuit is measured using adc of the ATmega8, input voltage for RC circuit is given from PB0. The timer is start  at the time of the PB0 making 1 .</p>

<p>The adc of ATmega8(ADCH) is 8 bit long so corresponding to 5V get 255 in ADCH. The TCNT1 value is taken to a variable when the output voltage of the RC circuit become 63.2% of input voltage.That is  3.16 v corresponding to these voltage ADCH show 161(appr).</p>

<p>Using a LCD can show the TCNT1 value. TCNT1 is 16 bit long.Here ATmega8 running in 8MHz clock,timer prescaled by 1024.</p>

<p>So if you get the real time multiply the TCNT1 value to (1024/8000000).</p>

<p>Some test examples:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> R=1kΩ  C=100µF  the calculated RC constant is 0.1S.</span></code></pre></td></tr></table></div></figure>


<p>The value of  TCNT1 is 846.Which is equal to 0.108288s.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> R=2kΩ  C=100µF  the calculated RC constant is 0.2S.</span></code></pre></td></tr></table></div></figure>


<p>The value of  TCNT1 is 1864.Which is equal to 0.238592s.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#include&lt;avr/io.h&gt;</span>
</span><span class='line'><span class="cp">#define F_CPU 8000000UL</span>
</span><span class='line'><span class="cp">#include &lt;util/delay.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#define RS 6 </span><span class="c1">//PD6</span>
</span><span class='line'><span class="cp">#define EN 7 </span><span class="c1">//PD7</span>
</span><span class='line'><span class="cp">#define databits PORTC </span><span class="c1">//PC0 to PC3</span>
</span><span class='line'><span class="cp">#define row1 cmd(0x80)</span>
</span><span class='line'><span class="cp">#define row2 cmd(0xc0)</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">adc_init</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="c1">//select AVCC reference voltage , left alignment of data and ADC4</span>
</span><span class='line'>   <span class="n">ADMUX</span><span class="o">=</span><span class="p">((</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">REFS0</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">ADLAR</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">MUX2</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>   <span class="c1">//enable ADC, set prescaler to divide the clock by 64 and auto triggering mode</span>
</span><span class='line'>   <span class="n">ADCSRA</span><span class="o">=</span><span class="p">((</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">ADEN</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">ADFR</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">ADPS2</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">ADPS1</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">ADPS0</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">conversion</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="c1">//start conversion</span>
</span><span class='line'>   <span class="n">ADCSRA</span><span class="o">|=</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">ADSC</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">port_init</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="n">DDRC</span> <span class="o">=</span> <span class="mh">0xcf</span><span class="p">;</span>
</span><span class='line'>   <span class="n">DDRD</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">RS</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EN</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">LCD_STROBE</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="n">PORTD</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EN</span><span class="p">);</span>
</span><span class='line'>   <span class="n">_delay_us</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>   <span class="n">PORTD</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">EN</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">data</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">c</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="n">PORTD</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">RS</span><span class="p">);</span>
</span><span class='line'>   <span class="n">_delay_us</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
</span><span class='line'>   <span class="n">databits</span> <span class="o">=</span> <span class="p">(</span><span class="n">c</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">);</span>
</span><span class='line'>   <span class="n">LCD_STROBE</span><span class="p">();</span>
</span><span class='line'>   <span class="n">databits</span> <span class="o">=</span> <span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span><span class='line'>   <span class="n">LCD_STROBE</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">cmd</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">c</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="n">PORTD</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">RS</span><span class="p">);</span>
</span><span class='line'>   <span class="n">_delay_us</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
</span><span class='line'>   <span class="n">databits</span> <span class="o">=</span> <span class="p">(</span><span class="n">c</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">);</span>
</span><span class='line'>   <span class="n">LCD_STROBE</span><span class="p">();</span>
</span><span class='line'>   <span class="n">databits</span> <span class="o">=</span> <span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span><span class='line'>   <span class="n">LCD_STROBE</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">clear</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="n">cmd</span><span class="p">(</span><span class="mh">0x01</span><span class="p">);</span>
</span><span class='line'>   <span class="n">_delay_ms</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">lcd_init</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="n">_delay_ms</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span>
</span><span class='line'>   <span class="n">cmd</span><span class="p">(</span><span class="mh">0x30</span><span class="p">);</span>
</span><span class='line'>   <span class="n">_delay_ms</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>   <span class="n">cmd</span><span class="p">(</span><span class="mh">0x30</span><span class="p">);</span>
</span><span class='line'>   <span class="n">_delay_us</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span class='line'>   <span class="n">cmd</span><span class="p">(</span><span class="mh">0x30</span><span class="p">);</span>
</span><span class='line'>   <span class="n">cmd</span><span class="p">(</span><span class="mh">0x28</span><span class="p">);</span> <span class="c1">// Function set (4-bit interface, 2 lines, 5*7Pixels)</span>
</span><span class='line'>   <span class="n">cmd</span><span class="p">(</span><span class="mh">0x28</span><span class="p">);</span> <span class="c1">// Function set (4-bit interface, 2 lines, 5*7Pixels)</span>
</span><span class='line'>   <span class="n">cmd</span><span class="p">(</span><span class="mh">0x0c</span><span class="p">);</span> <span class="c1">// Make cursorinvisible</span>
</span><span class='line'>   <span class="n">clear</span><span class="p">();</span> <span class="c1">// Clear screen</span>
</span><span class='line'>   <span class="n">cmd</span><span class="p">(</span><span class="mh">0x6</span><span class="p">);</span> <span class="c1">// Set entry Mode(auto increment of cursor)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">print</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="k">while</span><span class="p">(</span><span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="n">data</span><span class="p">(</span><span class="o">*</span><span class="n">p</span><span class="o">++</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="kt">char</span> <span class="n">a</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="n">b</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
</span><span class='line'>   <span class="kt">int</span> <span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">;</span>
</span><span class='line'>   <span class="n">DDRB</span><span class="o">=</span><span class="mh">0x01</span><span class="p">;</span>
</span><span class='line'>   <span class="n">_delay_ms</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
</span><span class='line'>   <span class="n">TCCR1B</span><span class="o">|=</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">CS10</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">CS12</span><span class="p">);</span><span class="c1">//prescale 1024</span>
</span><span class='line'>   <span class="n">port_init</span><span class="p">();</span>
</span><span class='line'>   <span class="n">adc_init</span><span class="p">();</span>
</span><span class='line'>   <span class="n">lcd_init</span><span class="p">();</span>
</span><span class='line'>   <span class="n">PORTB</span><span class="o">=</span><span class="mh">0x01</span><span class="p">;</span><span class="c1">//applying vcc to RC circuit</span>
</span><span class='line'>   <span class="n">TCNT1</span><span class="o">=</span><span class="mh">0x00</span><span class="p">;</span><span class="c1">//start the timer</span>
</span><span class='line'>
</span><span class='line'>   <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>   <span class="p">{</span>
</span><span class='line'>      <span class="n">conversion</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="p">(</span> <span class="n">ADIF</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="n">ADCH</span><span class="o">==</span><span class="mi">161</span><span class="p">)</span><span class="c1">//63% of the input voltage</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>         <span class="n">c</span><span class="o">=</span><span class="n">TCNT1</span><span class="p">;</span>
</span><span class='line'>         <span class="n">d</span><span class="o">=</span><span class="n">ADCH</span><span class="p">;</span>
</span><span class='line'>         <span class="n">itoa</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span><span class="c1">//integer to ASCII</span>
</span><span class='line'>         <span class="n">itoa</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span><span class="c1">//integer to ASCII</span>
</span><span class='line'>         <span class="n">row1</span><span class="p">;</span>
</span><span class='line'>         <span class="n">print</span><span class="p">(</span><span class="n">a</span><span class="p">);</span><span class="c1">//showing timer value</span>
</span><span class='line'>         <span class="n">row2</span><span class="p">;</span>
</span><span class='line'>         <span class="n">print</span><span class="p">(</span><span class="n">b</span><span class="p">);</span><span class="c1">//showing adc value</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>   <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/14/running-arduino-codes-in-stand-alone/">Running Arduino Codes in Stand Alone Atmega8</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-07-14T02:23:00+05:30'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>2:23 am</span></time>
        
           | <a href="/blog/2012/07/14/running-arduino-codes-in-stand-alone/#disqus_thread"
             data-disqus-identifier="http://blog.prabeeshk.com/blog/2012/07/14/running-arduino-codes-in-stand-alone/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>An Arduino board consists of an 8-bit Atmel AVR microcontroller with complementary components to facilitate programming and incorporation into other circuits.
If you wish to study the arduino codes ,then one of the major problems is the availability and cost of the Arduino board. If you have an atmega8 microcontroller  then you have to study the Arduino codes by simply changing some options in Arduino IDE.</p>

<p>First download the arduino IDE(I am using Arduino 1.0). Next you have to an avr  programmer(I am using usbasp and usbtiny).
Launch the arduino IDE as root.Then select your programmer from tools and also select your board  in this case select ATmega8.
Take care in fuse bytes because arduino codes are running in 8MHz.Y ou can enable internal 8MHz clock by</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="o">-</span><span class="n">U</span> <span class="nl">lfuse</span><span class="p">:</span><span class="nl">w</span><span class="p">:</span><span class="mh">0xa4</span><span class="o">:</span><span class="n">m</span> <span class="o">-</span><span class="n">U</span> <span class="nl">hfuse</span><span class="p">:</span><span class="nl">w</span><span class="p">:</span><span class="mh">0xcc</span><span class="o">:</span><span class="n">m</span>
</span></code></pre></td></tr></table></div></figure>


<p>Or you can enable the external crystal by setting the fuse byte as</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="o">-</span><span class="n">U</span> <span class="nl">lfuse</span><span class="p">:</span><span class="nl">w</span><span class="p">:</span><span class="mh">0xef</span><span class="o">:</span><span class="n">m</span>
</span></code></pre></td></tr></table></div></figure>


<p>and put a  8MHz crystal.</p>

<p>You can find mapping between atmega8 and arduino here</p>

<p><img class="center" src="/images/arduino.png" width="600" height="350" title="image" alt="images"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/04/simplest-and-low-cost-usb-avr/">Simplest and Low Cost USB AVR Programmer USBtinyISP</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-07-04T19:39:00+05:30'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>7:39 pm</span></time>
        
           | <a href="/blog/2012/07/04/simplest-and-low-cost-usb-avr/#disqus_thread"
             data-disqus-identifier="http://blog.prabeeshk.com/blog/2012/07/04/simplest-and-low-cost-usb-avr/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is the low cost AVR programmer using attiny2313. The schematic diagram is given below.</p>

<p><img class="center" src="/images/usbtiny_circuit.png" width="600" height="350" title="image" alt="images"></p>

<p>First setup the circuit as shown. Refer <a href="https://learn.adafruit.com/usbtinyisp">this site</a> for to burn program to this attiny 2313.</p>

<p>One important care taken to make fuse bit</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="n">avrdude</span> <span class="o">-</span><span class="n">c</span> <span class="n">usbasp</span> <span class="o">-</span><span class="n">p</span> <span class="n">t2313</span> <span class="o">-</span><span class="n">U</span> <span class="nl">hfuse</span><span class="p">:</span><span class="nl">w</span><span class="p">:</span><span class="mh">0xdf</span><span class="o">:</span><span class="n">m</span> <span class="o">-</span><span class="n">U</span> <span class="nl">lfuse</span><span class="p">:</span><span class="nl">w</span><span class="p">:</span><span class="mh">0xef</span><span class="o">:</span><span class="n">m</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you use serial port to write the program , use stk200 command instead of usbasp.</p>

<p><img class="center" src="/images/040720129881.jpg" width="600" height="350" title="image" alt="images"></p>

<p><img class="center" src="/images/04072012989.jpg" width="600" height="350" title="image" alt="images"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/04/lcd-interfacing-using-msp430/">LCD Interfacing Using Msp430</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-07-04T02:39:00+05:30'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>2:39 am</span></time>
        
           | <a href="/blog/2012/07/04/lcd-interfacing-using-msp430/#disqus_thread"
             data-disqus-identifier="http://blog.prabeeshk.com/blog/2012/07/04/lcd-interfacing-using-msp430/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>There is a pot connect to the ADC of msp430 Ao(pin p1.0). The values  of  ADC10MEM displayed using LCD.</p>

<p>The Vcc for pot is taken from msp430 launchpad.so maximum voltage is 3.6v.</p>

<p>The msp430 10 bit ADC operates in the range 0 to 3.6V. If the input voltage is 0V,</p>

<p>the ADC generates a 10 bit value:</p>

<p>0 0 0 0 0 0 0 0 0 0</p>

<p>which is numerically equal to 0.</p>

<p>When the input voltage is 3.6V, the ADC</p>

<p>generates a 10 bit pattern:</p>

<p>1 1 1 1 1 1 1 1 1 1</p>

<p>which is numerically equal to 1023.</p>

<p>This values are stored in ADC10MEM.</p>

<p>The Vcc for LCD is given using another power supply of 5v.Because LCD display needed 5v for its functioning.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#include &lt;msp430.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#define LCM_DIR P1DIR</span>
</span><span class='line'><span class="cp">#define LCM_OUT P1OUT</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#define LCM_PIN_RS BIT2 </span><span class="c1">// P1.2</span>
</span><span class='line'><span class="cp">#define LCM_PIN_EN BIT1 </span><span class="c1">// P1.1</span>
</span><span class='line'><span class="cp">#define LCM_PIN_D7 BIT7 </span><span class="c1">// P1.7</span>
</span><span class='line'><span class="cp">#define LCM_PIN_D6 BIT6 </span><span class="c1">// P1.6</span>
</span><span class='line'><span class="cp">#define LCM_PIN_D5 BIT5 </span><span class="c1">// P1.5</span>
</span><span class='line'><span class="cp">#define LCM_PIN_D4 BIT4 </span><span class="c1">// P1.4</span>
</span><span class='line'><span class="cp">#define LCM_PIN_MASK ((LCM_PIN_RS | LCM_PIN_EN | LCM_PIN_D7 | LCM_PIN_D6 | LCM_PIN_D5 | LCM_PIN_D4))</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#define FALSE 0</span>
</span><span class='line'><span class="cp">#define TRUE 1</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//msp430 adc</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">adc_init</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="n">ADC10CTL0</span> <span class="o">=</span> <span class="n">ADC10ON</span> <span class="o">|</span> <span class="n">ADC10SHT_2</span> <span class="o">|</span> <span class="n">SREF_0</span><span class="p">;</span>
</span><span class='line'>  <span class="n">ADC10CTL1</span> <span class="o">=</span> <span class="n">INCH_0</span> <span class="o">|</span> <span class="n">SHS_0</span> <span class="o">|</span> <span class="n">ADC10DIV_0</span> <span class="o">|</span> <span class="n">ADC10SSEL_0</span> <span class="o">|</span> <span class="n">CONSEQ_0</span> <span class="p">;</span>
</span><span class='line'>  <span class="n">ADC10AE0</span> <span class="o">=</span> <span class="n">BIT0</span><span class="p">;</span>
</span><span class='line'>  <span class="n">ADC10CTL0</span> <span class="o">|=</span> <span class="n">ENC</span> <span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">start_conversion</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="n">ADC10CTL0</span> <span class="o">|=</span> <span class="n">ADC10SC</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">unsigned</span> <span class="kt">int</span> <span class="nf">converting</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">ADC10CTL1</span> <span class="o">&amp;</span> <span class="n">ADC10BUSY</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// MSP430 LCD Code</span>
</span><span class='line'><span class="kt">void</span> <span class="nf">PulseLcm</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>  
</span><span class='line'>  <span class="c1">// pull EN bit low </span>
</span><span class='line'>  <span class="n">LCM_OUT</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">LCM_PIN_EN</span><span class="p">;</span>
</span><span class='line'>  <span class="n">__delay_cycles</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
</span><span class='line'>  <span class="c1">// pull EN bit high    </span>
</span><span class='line'>  <span class="n">LCM_OUT</span> <span class="o">|=</span> <span class="n">LCM_PIN_EN</span><span class="p">;</span>
</span><span class='line'>  <span class="n">__delay_cycles</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
</span><span class='line'>  <span class="c1">// pull EN bit low again   </span>
</span><span class='line'>  <span class="n">LCM_OUT</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="o">~</span><span class="n">LCM_PIN_EN</span><span class="p">);</span>
</span><span class='line'>  <span class="n">__delay_cycles</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">SendByte</span><span class="p">(</span><span class="kt">char</span> <span class="n">ByteToSend</span><span class="p">,</span> <span class="kt">int</span> <span class="n">IsData</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="c1">// clear out all pins  </span>
</span><span class='line'>  <span class="n">LCM_OUT</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="o">~</span><span class="n">LCM_PIN_MASK</span><span class="p">);</span>   
</span><span class='line'>  <span class="n">LCM_OUT</span> <span class="o">|=</span> <span class="p">(</span><span class="n">ByteToSend</span> <span class="o">&amp;</span> <span class="mh">0xF0</span><span class="p">);</span>   
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="n">IsData</span> <span class="o">==</span> <span class="n">TRUE</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">LCM_OUT</span> <span class="o">|=</span> <span class="n">LCM_PIN_RS</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">LCM_OUT</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">LCM_PIN_RS</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">PulseLcm</span><span class="p">();</span>
</span><span class='line'>  <span class="n">LCM_OUT</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="o">~</span><span class="n">LCM_PIN_MASK</span><span class="p">);</span>
</span><span class='line'>  <span class="n">LCM_OUT</span> <span class="o">|=</span> <span class="p">((</span><span class="n">ByteToSend</span> <span class="o">&amp;</span> <span class="mh">0x0F</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">);</span>    
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="n">IsData</span> <span class="o">==</span> <span class="n">TRUE</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">LCM_OUT</span> <span class="o">|=</span> <span class="n">LCM_PIN_RS</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">LCM_OUT</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">LCM_PIN_RS</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>    
</span><span class='line'>
</span><span class='line'>  <span class="n">PulseLcm</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">LcmSetCursorPosition</span><span class="p">(</span><span class="kt">char</span> <span class="n">Row</span><span class="p">,</span> <span class="kt">char</span> <span class="n">Col</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="kt">char</span> <span class="n">address</span><span class="p">;</span>
</span><span class='line'>  <span class="c1">// construct address from (Row, Col) pair  </span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="n">Row</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">address</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">address</span> <span class="o">=</span> <span class="mh">0x40</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">address</span> <span class="o">|=</span> <span class="n">Col</span><span class="p">;</span>
</span><span class='line'>  <span class="n">SendByte</span><span class="p">(</span><span class="mh">0x80</span> <span class="o">|</span> <span class="n">address</span><span class="p">,</span> <span class="n">FALSE</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">ClearLcmScreen</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="c1">// Clear display, return home</span>
</span><span class='line'>  <span class="n">SendByte</span><span class="p">(</span><span class="mh">0x01</span><span class="p">,</span> <span class="n">FALSE</span><span class="p">);</span>
</span><span class='line'>  <span class="n">SendByte</span><span class="p">(</span><span class="mh">0x02</span><span class="p">,</span> <span class="n">FALSE</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">InitializeLcm</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="n">LCM_DIR</span> <span class="o">|=</span> <span class="n">LCM_PIN_MASK</span><span class="p">;</span>
</span><span class='line'>  <span class="n">LCM_OUT</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="n">LCM_PIN_MASK</span><span class="p">);</span>   
</span><span class='line'>  <span class="n">__delay_cycles</span><span class="p">(</span><span class="mi">100000</span><span class="p">);</span>    
</span><span class='line'>  <span class="n">LCM_OUT</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">LCM_PIN_RS</span><span class="p">;</span>
</span><span class='line'>  <span class="n">LCM_OUT</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">LCM_PIN_EN</span><span class="p">;</span>  
</span><span class='line'>  <span class="n">LCM_OUT</span> <span class="o">=</span> <span class="mh">0x20</span><span class="p">;</span>
</span><span class='line'>  <span class="n">PulseLcm</span><span class="p">();</span>   
</span><span class='line'>  <span class="n">SendByte</span><span class="p">(</span><span class="mh">0x28</span><span class="p">,</span> <span class="n">FALSE</span><span class="p">);</span>   
</span><span class='line'>  <span class="n">SendByte</span><span class="p">(</span><span class="mh">0x0E</span><span class="p">,</span> <span class="n">FALSE</span><span class="p">);</span>   
</span><span class='line'>  <span class="n">SendByte</span><span class="p">(</span><span class="mh">0x06</span><span class="p">,</span> <span class="n">FALSE</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">PrintStr</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">Text</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="kt">char</span> <span class="o">*</span><span class="n">c</span><span class="p">;</span>
</span><span class='line'>  <span class="n">c</span> <span class="o">=</span> <span class="n">Text</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">while</span> <span class="p">((</span><span class="n">c</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">*</span><span class="n">c</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">))</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="n">SendByte</span><span class="p">(</span><span class="o">*</span><span class="n">c</span><span class="p">,</span> <span class="n">TRUE</span><span class="p">);</span>
</span><span class='line'>      <span class="n">c</span><span class="o">++</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="n">adc_init</span><span class="p">();</span>   
</span><span class='line'>  <span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="n">a</span><span class="p">;</span>    
</span><span class='line'>  <span class="kt">char</span> <span class="n">b</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span> 
</span><span class='line'>  <span class="n">WDTCTL</span> <span class="o">=</span> <span class="n">WDTPW</span> <span class="o">+</span> <span class="n">WDTHOLD</span><span class="p">;</span> <span class="c1">// Stop watchdog timer </span>
</span><span class='line'>  <span class="n">InitializeLcm</span><span class="p">();</span>  
</span><span class='line'>
</span><span class='line'>  <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>  <span class="p">{</span>    
</span><span class='line'>
</span><span class='line'>      <span class="n">start_conversion</span><span class="p">();</span>   
</span><span class='line'>      <span class="k">while</span><span class="p">(</span><span class="n">converting</span><span class="p">());</span>    
</span><span class='line'>      <span class="n">a</span> <span class="o">=</span> <span class="n">ADC10MEM</span><span class="p">;</span>   
</span><span class='line'>      <span class="n">itoa</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span><span class="c1">//integer to ASCII   </span>
</span><span class='line'>      <span class="n">ClearLcmScreen</span><span class="p">();</span> 
</span><span class='line'>      <span class="n">PrintStr</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>    
</span><span class='line'>      <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">5000</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<div class="embed-video-container"><iframe src="//www.youtube.com/embed/hsM_o5hNUmg" allowfullscreen></iframe></div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/02/21/introduction-to-avr-programing/">Introduction to AVR Programing</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-02-21T02:39:00+05:30'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2012</span></span> <span class='time'>2:39 am</span></time>
        
           | <a href="/blog/2012/02/21/introduction-to-avr-programing/#disqus_thread"
             data-disqus-identifier="http://blog.prabeeshk.com/blog/2012/02/21/introduction-to-avr-programing/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Atmel AVR 8-bit and 32-bit microcontrollers deliver a unique combination of performance, power efficiency, and design flexibility. Optimized to speed time to market, they are based on the industry’s most code-efficient architecture for C and assembly programming. No other microcontrollers deliver more computing performance with better power efficiency. Industry-leading development tools and design support let you get to market faster. Once there, the large AVR family lets you reuse your knowledge when improving your products and expanding to new markets—easily and cost-effectively.</p>

<p>package required in linux</p>

<p>binutils: Programs to manipulate binary and object files that may have been created for Atmel’s AVR architecture. This package is primarily for AVR developers and cross-compilers.</p>

<p>gcc-avr: The GNU C compiler, a fairly portable optimising compiler that supports multiple languages. This package includes C language support.</p>

<p>avr-libc: Standard library used for developing C programs for Atmel AVR microcontrollers. This package contains static libraries, as well as needed header files.</p>

<p>sample programe to blink  a LED</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#include&lt;avr/io.h&gt;</span>
</span><span class='line'><span class="cp">#include&lt;util/delay.h&gt;</span>
</span><span class='line'><span class="n">main</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">DDRC</span> <span class="o">|=</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">PC2</span><span class="p">;</span>  <span class="cm">/* PC2 will now be the output pin */</span>
</span><span class='line'>        <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>                <span class="n">PORTC</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">PC2</span><span class="p">);</span><span class="cm">/* PC2 LOW */</span>
</span><span class='line'>               <span class="n">_delay_ms</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span><span class='line'>                <span class="n">PORTC</span> <span class="o">|=</span><span class="p">(</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">PC2</span><span class="p">);</span> <span class="cm">/* PC2 HIGH */</span>
</span><span class='line'>               <span class="n">_delay_ms</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>save th above program to a file led.c</p>

<p>Then compile the program using avr-gcc and convert the c-code into object code as follows</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="n">avr</span><span class="o">-</span><span class="n">gcc</span> <span class="o">-</span><span class="n">mmcu</span><span class="o">=</span><span class="n">atmega8</span>  <span class="n">led</span><span class="p">.</span><span class="n">c</span> <span class="o">-</span><span class="n">o</span> <span class="n">led</span><span class="p">.</span><span class="n">o</span>
</span></code></pre></td></tr></table></div></figure>


<p>in next step convert the led.o object code to hex-code</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="n">avr</span><span class="o">-</span><span class="n">objcopy</span> <span class="o">-</span><span class="n">j</span> <span class="p">.</span><span class="n">text</span> <span class="o">-</span><span class="n">j</span> <span class="p">.</span><span class="n">data</span> <span class="o">-</span><span class="n">O</span>  <span class="n">ihex</span>  <span class="n">led</span><span class="p">.</span><span class="n">o</span>  <span class="n">led</span><span class="p">.</span><span class="n">hex</span>
</span></code></pre></td></tr></table></div></figure>


<p>in final step using USBASP we can write program  to avr</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="n">avrdude</span> <span class="o">-</span><span class="n">c</span> <span class="n">usbasp</span> <span class="o">-</span><span class="n">p</span> <span class="n">m8</span> <span class="o">-</span><span class="n">U</span> <span class="nl">flash</span><span class="p">:</span><span class="nl">w</span><span class="p">:</span><span class="n">led</span><span class="p">.</span><span class="nl">hex</span><span class="p">:</span><span class="n">a</span>
</span></code></pre></td></tr></table></div></figure>


<p>for more details about USBASP <a href="http://achuwilson.wordpress.com/2011/12/15/usbasp-a-usb-programmer-for-avr-microcontrollers/">visit</a></p>

<h4>Code Explanation</h4>

<p>The GNU C compiler for the Atmel family identifies all functional units within the microcontroller with meaningful names. Thus, writing `PORTC=0xff’ will result in the compiler generating machine code that writes 0xff to I/O port C, which will set all port C pins to logic high. Because ports are bidirectional, we must decide whether each pin should act as input or output. If the i’th bit of a register called DDRC (data direction register C) is 1, then the i’th pin of PORTC’s i’th pin will be an output. Otherwise, it will act as an input pin. (Note that pin and bit numbers start at zero.) To make an LED blink, you have to make a pin high, then low. (Here, we use PORTC’s 2nd port. That is, PC2 will be the 25th pin.) There should be a delay between the two. This is what the rest of the code does.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/09/25/am-plot-matplotlib/">AM Generation Using Matplotlib Python</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2011-09-25T01:39:00+05:30'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2011</span></span> <span class='time'>1:39 am</span></time>
        
           | <a href="/blog/2011/09/25/am-plot-matplotlib/#disqus_thread"
             data-disqus-identifier="http://blog.prabeeshk.com/blog/2011/09/25/am-plot-matplotlib/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>we can plot AM waves using matplotlib</p>

<p>It is the one of the most strongest tool in linux to plot the waves</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">matplotlib.pylab</span> <span class="kn">as</span> <span class="nn">plt</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">num</span>
</span><span class='line'><span class="n">fc</span><span class="o">=</span><span class="mi">50</span><span class="p">;</span>
</span><span class='line'><span class="n">fm</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span>
</span><span class='line'><span class="n">t</span><span class="o">=</span><span class="n">num</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.001</span><span class="p">);</span>
</span><span class='line'><span class="n">c</span><span class="o">=</span><span class="n">num</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">num</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">fc</span><span class="o">*</span><span class="n">t</span><span class="p">);</span>
</span><span class='line'><span class="n">m</span><span class="o">=</span><span class="n">num</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">num</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">fm</span><span class="o">*</span><span class="n">t</span><span class="p">);</span>
</span><span class='line'><span class="n">am</span><span class="o">=</span><span class="n">c</span><span class="o">*</span><span class="p">(</span><span class="mi">2</span><span class="o">+</span><span class="n">m</span><span class="p">);</span>
</span><span class='line'><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">am</span><span class="p">,</span><span class="err">’</span><span class="n">r</span><span class="err">’</span><span class="p">)</span>
</span><span class='line'><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p><img class="center" src="/images/am.png" width="600" height="350" title="image" alt="images"></p>

<p>For more details about matplotlib <a href="http://matplotlib.sourceforge.net/users/artists.html">refer</a></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/index.html">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  <div align="center">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- index-top -->
    <ins class="adsbygoogle"
      style="display:inline-block;width:250px;height:250px"
      data-ad-client="ca-pub-1368619820510426"
      data-ad-slot="1578290392"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/04/07/self-contained-pyspark-application/">Self Contained PySpark Application</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/31/install-apache-spark-on-ubuntu-14-dot-04/">Install Apache Spark on Ubuntu-14.04</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/08/creating-uber-jar-for-spark-project-using-sbt-assembly/">Creating Assembled JAR for Standalone Spark Application</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/01/a-standalone-spark-application-in-scala/">A Standalone Spark Application in Scala</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/26/installing-apache-spark-on-ubuntu-1204/">Installing Apache Spark on Ubuntu-12.04</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/prabeesh">@prabeesh</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'prabeesh',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/+prabeeshk?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- index-side -->
  <ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1368619820510426"
     data-ad-slot="7904025599"
     data-ad-format="auto"></ins>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Prabeesh K -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'prabeeshk';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
